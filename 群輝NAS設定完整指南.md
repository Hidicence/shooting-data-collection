# 群輝 NAS 設定完整指南

## 📋 設定概覽

本指南將幫助您在群輝 NAS 上正確設定以下服務：
1. **WebDAV 服務**：讓應用程式直接上傳檔案到 NAS
2. **文件請求分享連結**：提供外部上傳的備用方案
3. **用戶權限管理**：確保上傳權限正確設定

---

## 🔧 第一部分：WebDAV 服務設定

### 1.1 啟用 WebDAV 服務

1. **登入 DSM 管理介面**
   - 開啟瀏覽器
   - 前往 `OneBeerShot.quickconnect.to` 
   - 使用管理員帳號登入

2. **開啟 WebDAV 套件**
   - 進入 `套件中心`
   - 搜尋 `WebDAV Server`
   - 如果尚未安裝，請點選「安裝」
   - 如果已安裝，請點選「開啟」

3. **設定 WebDAV 服務**
   - 進入 `控制台` → `檔案服務` → `WebDAV`
   - ✅ 勾選「啟用 WebDAV」
   - ✅ 勾選「啟用 WebDAV HTTPS 連線」（可選）
   - 設定 HTTP 端口：`5005`（與您的設定一致）
   - 設定 HTTPS 端口：`5006`（可選）
   - 點選「套用」

### 1.2 確認 WebDAV 連線設定

4. **測試 WebDAV 連線**
   - 在電腦上開啟檔案總管
   - 在網址列輸入：`http://OneBeerShot.quickconnect.to:5005`
   - 應該會要求輸入帳號密碼
   - 輸入：`onebeershot` / `onebeershot1687`
   - 如果成功，會看到 NAS 的資料夾結構

---

## 📁 第二部分：資料夾權限設定

### 2.1 創建拍攝照片資料夾

1. **進入 File Station**
   - 開啟 DSM → `File Station`
   - 導航到您想要的位置（建議在 `homes` 或 `photo` 下）

2. **創建資料夾結構**
   ```
   拍攝照片/
   ├── 專案A/
   │   ├── 個人記錄/
   │   │   ├── 張三/
   │   │   └── 李四/
   │   ├── 統整員記錄/
   │   └── 其他記錄/
   └── 專案B/
       └── ...
   ```

### 2.2 設定資料夾權限

3. **設定拍攝照片資料夾權限**
   - 右鍵點選「拍攝照片」資料夾
   - 選擇「屬性」
   - 進入「權限」標籤
   - 確認 `onebeershot` 用戶有以下權限：
     - ✅ 讀取：已勾選
     - ✅ 寫入：已勾選
     - ✅ 執行：已勾選
   - 點選「套用到這個資料夾、子資料夾及檔案」
   - 點選「確定」

---

## 🔗 第三部分：文件請求分享連結設定

### 3.1 創建文件請求分享連結

1. **進入 File Station**
   - 導航到「拍攝照片」資料夾
   - 右鍵點選該資料夾
   - 選擇「分享連結」

2. **設定文件請求分享**
   - 在分享連結對話框中：
     - ✅ 勾選「啟用分享連結」
     - ✅ 勾選「允許透過分享連結上傳檔案」
     - 設定連結名稱（可選）
     - 設定有效期限（建議設定較長時間或永久）
     - 設定密碼（可選，但建議設定）
   - 點選「建立」

3. **複製分享連結**
   - 複製生成的分享連結
   - 應該類似：`http://OneBeerShot.quickconnect.to/sharing/xxxxxxxx`

### 3.2 測試文件請求分享連結

4. **測試上傳功能**
   - 開啟新的瀏覽器視窗（或使用無痕模式）
   - 貼上分享連結
   - 應該看到上傳界面，允許您選擇檔案上傳
   - 嘗試上傳一個測試檔案
   - 確認檔案成功上傳到 NAS

---

## 🌐 第四部分：網路與防火牆設定

### 4.1 確認端口設定

1. **檢查 DSM 端口設定**
   - 進入 `控制台` → `外部存取` → `路由器設定`
   - 確認以下端口已開啟：
     - HTTP：`5000`
     - HTTPS：`5001`
     - WebDAV HTTP：`5005`
     - WebDAV HTTPS：`5006`

2. **防火牆設定**
   - 進入 `控制台` → `安全性` → `防火牆`
   - 確認防火牆規則允許上述端口

### 4.2 QuickConnect 設定

3. **確認 QuickConnect 狀態**
   - 進入 `控制台` → `外部存取` → `QuickConnect`
   - 確認狀態為「已連線」
   - 確認 QuickConnect ID 為 `OneBeerShot`

---

## 🧪 第五部分：測試與驗證

### 5.1 WebDAV 連線測試

1. **使用瀏覽器測試**
   - 在瀏覽器中輸入：`http://OneBeerShot.quickconnect.to:5005`
   - 輸入帳號密碼：`onebeershot` / `onebeershot1687`
   - 應該能看到檔案列表

2. **使用 WebDAV 客戶端測試**
   - Windows：使用「網路位置」功能
   - Mac：使用「連接伺服器」功能
   - 輸入相同的 URL 和認證資訊

### 5.2 文件請求分享連結測試

3. **測試分享連結上傳**
   - 使用不同的裝置或瀏覽器
   - 開啟分享連結
   - 嘗試上傳檔案
   - 確認檔案出現在 NAS 中

---

## 🔧 第六部分：疑難排解

### 6.1 常見問題

**問題 1：WebDAV 連線失敗**
- 確認 WebDAV 服務已啟用
- 確認端口 5005 已開啟
- 確認用戶帳號密碼正確
- 嘗試使用 IP 位址而非 QuickConnect

**問題 2：權限被拒絕**
- 確認用戶對目標資料夾有寫入權限
- 確認資料夾路徑正確
- 檢查磁碟空間是否充足

**問題 3：分享連結無法上傳**
- 確認分享連結設定中已啟用檔案上傳
- 確認分享連結尚未過期
- 確認目標資料夾有足夠權限

### 6.2 進階設定

**使用 HTTPS（建議）**
- 啟用 HTTPS 連線以提高安全性
- 更新應用程式設定以使用 HTTPS URL

**設定 SSL 憑證**
- 進入 `控制台` → `安全性` → `憑證`
- 設定有效的 SSL 憑證

---

## 📝 設定檢查清單

完成以下檢查確保設定正確：

**WebDAV 服務**
- [ ] WebDAV 服務已啟用
- [ ] 端口 5005 已開啟
- [ ] 用戶帳號 `onebeershot` 已建立
- [ ] 密碼 `onebeershot1687` 已設定
- [ ] 資料夾「拍攝照片」已建立
- [ ] 資料夾權限已正確設定

**文件請求分享連結**
- [ ] 分享連結已建立
- [ ] 已啟用「允許透過分享連結上傳檔案」
- [ ] 分享連結可以正常開啟
- [ ] 可以透過分享連結上傳測試檔案

**網路設定**
- [ ] QuickConnect 狀態正常
- [ ] 防火牆規則已設定
- [ ] 端口轉發已設定（如果使用）

**測試驗證**
- [ ] 瀏覽器可以連接 WebDAV
- [ ] 分享連結可以正常上傳
- [ ] 應用程式可以成功上傳照片

---

## 🎯 下一步

完成上述設定後，請：

1. **更新環境變數**（如果有變更）
2. **重新啟動應用程式**
3. **測試照片上傳功能**
4. **檢查 NAS 中是否有新檔案**

如果仍有問題，請提供具體的錯誤訊息，我會協助您進一步診斷。 